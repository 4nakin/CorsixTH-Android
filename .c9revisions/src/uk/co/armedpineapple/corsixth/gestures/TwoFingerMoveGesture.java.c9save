{"ts":1354186688191,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/*\n *   Copyright (C) 2012 Alan Woolley\n *   \n *   See LICENSE.TXT for full license\n */\npackage uk.co.armedpineapple.corsixth.gestures;\n\nimport android.util.Log;\nimport android.view.MotionEvent;\nimport android.view.ScaleGestureDetector;\nimport uk.co.armedpineapple.corsixth.SDLActivity;\n\npublic class TwoFingerMoveGesture implements\n\t\tScaleGestureDetector.OnScaleGestureListener {\n\n\tprivate final float delta = 10;\n\n\tprivate float prevX, prevY, originX, originY;\n\n\tprivate boolean first = false;\n\n\t@Override\n\tpublic boolean onScale(ScaleGestureDetector detector) {\n\n\t\tfloat[] coords = SDLActivity.mSurface.translateCoords(\n\t\t\t\tdetector.getFocusX(), detector.getFocusY());\n\t\tprevX = coords[0];\n\t\tprevY = coords[1];\n\t\tif (first) {\n\t\t\t// Check to see if we've moved a suitable distance. By doing this,\n\t\t\t// we can make the start of the gesture much smoother.\n\t\t\tif ((Math.abs(originX - prevX) > delta || Math.abs(originY - prevY) > delta)) {\n\n\t\t\t\tSDLActivity.onNativeTouch(0, 0, MotionEvent.ACTION_DOWN, prevX,\n\t\t\t\t\t\tprevY, 0, 2, 2);\n\t\t\t\tfirst = false;\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tSDLActivity.onNativeTouch(0, 0, MotionEvent.ACTION_MOVE, prevX,\n\t\t\t\t\tprevY, 0, 2, 2);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t@Override\n\tpublic boolean onScaleBegin(ScaleGestureDetector detector) {\n\t\tLog.d(getClass().getSimpleName(), \"Move gesture - BEGIN\");\n\t\tfirst = true;\n\t\tfloat[] coords = SDLActivity.mSurface.translateCoords(\n\t\t\t\tdetector.getFocusX(), detector.getFocusY());\n\t\t// Record the coordinates that triggered the gesture\n\t\toriginX = coords[0];\n\t\toriginY = coords[1];\n\n\t\treturn true;\n\t}\n\n\t@Override\n\tpublic void onScaleEnd(ScaleGestureDetector detector) {\n\t\tLog.d(getClass().getSimpleName(), \"Move gesture - END\");\n\n\t\tif (!first) {\n\n\t\t\tSDLActivity.onNativeTouch(0, 0, MotionEvent.ACTION_UP, prevX,\n\t\t\t\t\tprevY, 0, 2, 2);\n\t\t}\n\t}\n\n}\n"]],"start1":0,"start2":0,"length1":0,"length2":1801}]],"length":1801}
